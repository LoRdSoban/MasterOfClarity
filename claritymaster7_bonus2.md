[Playground Link](https://play.hiro.so/?epoch=2.5&snippet=OzsgTk9URTogRGVmaW5lIHlvdXIgU0lQMTAgdHJhaXQgKGFuZCBtYWtlIHN1cmUgdG8gZGVwbG95IGl0IGJlZm9yZSBkZXBsb3lpbmcgeW91ciB0b2tlbiBjb250cmFjdCkKOzsgSW1wbGVtZW50IHlvdXIgU0lQMTAgY29udHJhY3QgaGVyZSAobG9vayBpbnRvIHRoZSBgaW1wbC10cmFpdGAgZnVuY3Rpb24pCgo7OyhpbXBsLXRyYWl0IC5zaXAtMDEwLXRyYWl0LWZ0LXN0YW5kYXJkLnNpcC0wMTAtdHJhaXQpCgooZGVmaW5lLWZ1bmdpYmxlLXRva2VuIEZhdWNldFRva2VuKQoKKGRlZmluZS1jb25zdGFudCBDT05UUkFDVF9PV05FUiB0eC1zZW5kZXIpCihkZWZpbmUtY29uc3RhbnQgVE9LRU5fTkFNRSAiVGhlIEZhdWNldCIpCihkZWZpbmUtY29uc3RhbnQgVE9LRU5fU1lNQk9MICJEUklQIikKKGRlZmluZS1jb25zdGFudCBUT0tFTl9ERUNJTUFMUyB1NikKKGRlZmluZS1jb25zdGFudCBDTEFJTV9BTU9VTlQgdTEwMDAwMDAwMCkgOzsgMTAwIHRva2VucyB3aXRoIDYgZGVjaW1hbHMKKGRlZmluZS1jb25zdGFudCBCTE9DS1NfQkVUV0VFTl9DTEFJTVMgdTE0NCkgOzsgQXBwcm94aW1hdGVseSAyNCBob3VycyAoYXNzdW1pbmcgMTAtbWludXRlIGJsb2NrIHRpbWVzKQoKKGRlZmluZS1jb25zdGFudCBlcnItb3duZXItb25seSAoZXJyIHUxMDApKQooZGVmaW5lLWNvbnN0YW50IGVyci1ub3QtdG9rZW4tb3duZXIgKGVyciB1MTAxKSkKCihkZWZpbmUtbWFwIExhc3RDbGFpbWVkQXRCbG9jayBwcmluY2lwYWwgdWludCkKCjs7IFNJUC0wMTAgZnVuY3Rpb25zCjs7IEltcGxlbWVudDogdHJhbnNmZXIsIGdldC1uYW1lLCBnZXQtc3ltYm9sLCBnZXQtZGVjaW1hbHMsIGdldC1iYWxhbmNlLCBnZXQtdG90YWwtc3VwcGx5LCBnZXQtdG9rZW4tdXJpCihkZWZpbmUtcHVibGljICh0cmFuc2ZlciAoYW1vdW50IHVpbnQpIChzZW5kZXIgcHJpbmNpcGFsKSAocmVjaXBpZW50IHByaW5jaXBhbCkgKG1lbW8gKG9wdGlvbmFsIChidWZmIDM0KSkpKQogICAgKGJlZ2luCiAgICAgICAgKGFzc2VydHMhIChpcy1lcSBjb250cmFjdC1jYWxsZXIgc2VuZGVyKSBlcnItbm90LXRva2VuLW93bmVyKQogICAgICAgICh0cnkhIChmdC10cmFuc2Zlcj8gRmF1Y2V0VG9rZW4gYW1vdW50IHNlbmRlciByZWNpcGllbnQpKQogICAgICAgIChtYXRjaCBtZW1vIHRvLXByaW50IChwcmludCB0by1wcmludCkgMHgpCiAgICAgICAgKG9rIHRydWUpCiAgICApCikKCihkZWZpbmUtcmVhZC1vbmx5IChnZXQtbmFtZSkKICAgIChvayBUT0tFTl9OQU1FKQopCgooZGVmaW5lLXJlYWQtb25seSAoZ2V0LXN5bWJvbCkKICAgIChvayBUT0tFTl9TWU1CT0wpCikKCihkZWZpbmUtcmVhZC1vbmx5IChnZXQtZGVjaW1hbHMpCiAgICAob2sgVE9LRU5fREVDSU1BTFMpCikKCihkZWZpbmUtcmVhZC1vbmx5IChnZXQtYmFsYW5jZSAod2hvIHByaW5jaXBhbCkpCiAgICAob2sgKGZ0LWdldC1iYWxhbmNlIEZhdWNldFRva2VuIHdobykpCikKCihkZWZpbmUtcmVhZC1vbmx5IChnZXQtdG90YWwtc3VwcGx5KQogICAgKG9rIChmdC1nZXQtc3VwcGx5IEZhdWNldFRva2VuKSkKKQoKKGRlZmluZS1yZWFkLW9ubHkgKGdldC10b2tlbi11cmkpCiAgICAob2sgbm9uZSkKKQoKCjs7IEZhdWNldCBmdW5jdGlvbnMKKGRlZmluZS1wdWJsaWMgKGNsYWltKQoobGV0IAogICgKICAgIChjbGFpbWVyIHR4LXNlbmRlcikKICApIAogICAgKGFzc2VydHMhIChpcy1jbGFpbS1hbGxvd2VkIHR4LXNlbmRlcikgKGVyciB1MTAxKSkKICAgIChtYXAtc2V0IExhc3RDbGFpbWVkQXRCbG9jayB0eC1zZW5kZXIgYmxvY2staGVpZ2h0KQogICAgKHRyeSEgKGFzLWNvbnRyYWN0ICh0cmFuc2ZlciBDTEFJTV9BTU9VTlQgdHgtc2VuZGVyIGNsYWltZXIgbm9uZSkpKQogICAgKG9rIHRydWUpCikKKQoKKGRlZmluZS1yZWFkLW9ubHkgKHRpbWUtdW50aWwtbmV4dC1jbGFpbSAodXNlciBwcmluY2lwYWwpKQogIChsZXQKICAgICgKICAgICAgKGxhc3QtY2xhaW0gKGRlZmF1bHQtdG8gdTAgKG1hcC1nZXQ_IExhc3RDbGFpbWVkQXRCbG9jayB1c2VyKSkpCiAgICApCiAgICAKICAgIChpZiAoaXMtZXEgbGFzdC1jbGFpbSB1MCkKCiAgICAgIHUwCgogICAgICAoLSBCTE9DS1NfQkVUV0VFTl9DTEFJTVMgKC0gYmxvY2staGVpZ2h0IGxhc3QtY2xhaW0pKQogICAgKQoKICApCikKCjs7IEhlbHBlciBmdW5jdGlvbnMKKGRlZmluZS1wcml2YXRlIChpcy1jbGFpbS1hbGxvd2VkICh1c2VyIHByaW5jaXBhbCkpCiAgKGlmICg8PSAodGltZS11bnRpbC1uZXh0LWNsYWltIHR4LXNlbmRlcikgdTApCgogICAgdHJ1ZQoKICAgIGZhbHNlCiAgCiAgKQopCgooZnQtbWludD8gRmF1Y2V0VG9rZW4gdTEwMDAwMDAwMDAwMDAwIChhcy1jb250cmFjdCB0eC1zZW5kZXIpKQoKOzsgVGVzdCBjYXNlcwoKOzsgVGVzdCBTSVAtMDEwIGZ1bmN0aW9ucwo7OyAocHJpbnQgKGdldC1uYW1lKSkKOzsgKHByaW50IChnZXQtc3ltYm9sKSkKOzsgKHByaW50IChnZXQtZGVjaW1hbHMpKQo7OyAocHJpbnQgKGdldC1iYWxhbmNlIHR4LXNlbmRlcikpCjs7IChwcmludCAoZ2V0LXRvdGFsLXN1cHBseSkpCjs7IChwcmludCAoZ2V0LXRva2VuLXVyaSkpCgo7OyBUZXN0IGNsYWltIGZ1bmN0aW9uCjs7IChwcmludCAoY2xhaW0pKQo7OyAocHJpbnQgKGdldC1iYWxhbmNlIHR4LXNlbmRlcikpCjs7IChwcmludCAoY2xhaW0pKSA7OyBTaG91bGQgZmFpbCBpZiBjYWxsZWQgdHdpY2UgaW4gYSByb3cKCjs7IFRlc3QgdGltZS11bnRpbC1uZXh0LWNsYWltIGZ1bmN0aW9uCjs7IChwcmludCAodGltZS11bnRpbC1uZXh0LWNsYWltIHR4LXNlbmRlcikpCgo7OyBUZXN0IHRyYW5zZmVyIGZ1bmN0aW9uCjs7IChkZWZpbmUtY29uc3RhbnQgcmVjaXBpZW50ICdTVDFKNEc2UlI2NDNCQ0c4RzhTUjZNMkQ5WjlLWFQyTkpEUkszRkJUSykKOzsgKHByaW50ICh0cmFuc2ZlciB1NTAwMDAwMDAgdHgtc2VuZGVyIHJlY2lwaWVudCBub25lKSkKOzsgKHByaW50IChnZXQtYmFsYW5jZSB0eC1zZW5kZXIpKQo7OyAocHJpbnQgKGdldC1iYWxhbmNlIHJlY2lwaWVudCkpCgo7OyBBZHZhbmNlZCB0ZXN0OiBNdWx0aXBsZSB1c2Vycwo7OyAoZGVmaW5lLWNvbnN0YW50IHVzZXIyICdTVDJDWTVWMzlOSERQV1NYTVc5UURUM0hDM0dENlE2WFg0Q0ZSSzlBRykKOzsgKHByaW50IChhcy1jb250cmFjdCAodHJhbnNmZXIgQ0xBSU1fQU1PVU5UIHR4LXNlbmRlciB1c2VyMiBub25lKSkpCjs7IChwcmludCAoZ2V0LWJhbGFuY2UgdXNlcjIpKQo7OyAocHJpbnQgKGFzLWNvbnRyYWN0IChjbGFpbSkpKQo7OyAocHJpbnQgKGFzLWNvbnRyYWN0ICh0aW1lLXVudGlsLW5leHQtY2xhaW0gdHgtc2VuZGVyKSkp)